---
title: 使用ADB无线连接Android真机进行调试
categories: [Tech]
tags: [adb,android,automation]
date: 2017-12-12
---

其实这已经是一个很古老的知识了，记录一下备忘。

<!-- more -->

## 准备工作

- 手机和电脑需要在同一个局域网内
- 电脑上已经安装好ADB工具，可以是Mac或者Windows

## 开始

### 1. 打开手机端口

让手机在指定的端口可以接收到TCP/IP连接。

1. 确保手机开启了usb调试
2. 用usb线把手机和电脑连接起来
3. 执行命令：`adb tcpip 5555`

执行成功后就可以把usb线拔掉了，端口可以不是5555，这个官方默认使用的。

### 2. 找到手机的IP地址

一般在 设置-关于手机-状态信息-IP地址可以找到。

比如，我这里看到手机的IP地址是192.168.1.100

### 3. 通过IP地址连接手机

执行命令：

```
adb connect 192.168.1.100:5555
```

如果提示：

> connected to 192.160.1.100:5555

则表示连接成功，如果端口号是5555可以省略，直接：

```
adb connect 192.168.1.100
```

### 4. 如果没有连接成功

如果确定你的网络和端口都没问题，可以尝试重启一下adb服务：

> adb kill-server

然后再进行连接，实在还是不行就Google吧。

### 5. 连接成功

如果连接成功的话，执行以下命令查看当前连接的设备列表：

```
adb devices
```

可以看到连接的设备，像这样

> $ adb devices
> List of devices attached
> 192.168.1.100:5555	device

以后没有数据线也可以调试手机或者在上面运行自动化测试了。

## 注意事项

1. 更换一个网络环境需要使用新IP重新connect即可。
2. 但是如果手机重启了，就需要重新连接数据线再次开启端口。
3. 开启端口可以通过adb，也可以直接在手机上打开，但一般需要root权限和特殊软件。